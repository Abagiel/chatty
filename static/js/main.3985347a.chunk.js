(this.webpackJsonpcrisk=this.webpackJsonpcrisk||[]).push([[0],{19:function(e,t,a){e.exports=a(39)},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a.n(c),s=a(2);a(30);function i(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:"header-toggler",type:"checkbox",id:"toggler",name:"toggler"}),r.a.createElement("label",{htmlFor:"toggler"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null)))}var l=a(13),m=a(3),u=a(1),d={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},f={exit:r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.a.createElement("path",{d:"M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),create:r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.a.createElement("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})),"open room":r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"hsl(140 80% 50%)",width:"18px",height:"18px"},r.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.a.createElement("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h2c0-1.66 1.34-3 3-3s3 1.34 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"})),"private room":r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"hsl(60 80% 50%)",width:"18px",height:"18px"},r.a.createElement("g",{fill:"none"},r.a.createElement("path",{d:"M0 0h24v24H0V0z"}),r.a.createElement("path",{d:"M0 0h24v24H0V0z",opacity:".87"})),r.a.createElement("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"})),conversationImage:r.a.createElement("svg",{height:"512",viewBox:"0 0 58 57",width:"512",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{id:"Page-1",fill:"none",fillRule:"evenodd"},r.a.createElement("g",{id:"046---Tying-Chats"},r.a.createElement("path",{id:"Shape",d:"m40 21h14c2.209139 0 4 1.790861 4 4v20c0 2.209139-1.790861 4-4 4h-3l.69 6.17c.0479682.4247282-.1793133.8329868-.5655965 1.015963-.3862831.1829763-.8461548.1002113-1.1444035-.205963l-6.98-6.98h-21c-2.209139 0-4-1.790861-4-4v-17z",fill:"#3b97d3",fillRule:"nonzero"}),r.a.createElement("path",{id:"Shape",d:"m8 4h-4v4",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),r.a.createElement("g",{fillRule:"nonzero"},r.a.createElement("path",{id:"Shape",d:"m40 4v20c0 2.209139-1.790861 4-4 4h-21l-6.98 6.98c-.29824873.3061743-.75812038.3889393-1.14440355.205963-.38628317-.1829762-.61356468-.5912348-.56559645-1.015963l.69-6.17h-3c-2.209139 0-4-1.790861-4-4v-20c0-2.209139 1.790861-4 4-4h32c2.209139 0 4 1.790861 4 4z",fill:"#ff5364"}),r.a.createElement("path",{id:"Shape",d:"m54 46h-4c-.5522847 0-1-.4477153-1-1s.4477153-1 1-1h3v-3c0-.5522847.4477153-1 1-1s1 .4477153 1 1v4c0 .5522847-.4477153 1-1 1z",fill:"#fff"}),r.a.createElement("circle",{id:"Oval",cx:"9",cy:"14",fill:"#fff",r:"3"}),r.a.createElement("circle",{id:"Oval",cx:"31",cy:"14",fill:"#fff",r:"3"}),r.a.createElement("circle",{id:"Oval",cx:"20",cy:"14",fill:"#fff",r:"3"}),r.a.createElement("circle",{id:"Oval",cx:"27",cy:"35",fill:"#fff",r:"3"}),r.a.createElement("circle",{id:"Oval",cx:"49",cy:"35",fill:"#fff",r:"3"}),r.a.createElement("circle",{id:"Oval",cx:"38",cy:"35",fill:"#fff",r:"3"}))))),clear:r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),arrowRight:r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.a.createElement("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z"})),login:r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("g",null,r.a.createElement("rect",{fill:"none",height:"24",width:"24"})),r.a.createElement("g",null,r.a.createElement("path",{d:"M11,7L9.6,8.4l2.6,2.6H2v2h10.2l-2.6,2.6L11,17l5-5L11,7z M20,19h-8v2h8c1.1,0,2-0.9,2-2V5c0-1.1-0.9-2-2-2h-8v2h8V19z"}))),delete:r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.a.createElement("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"})),sad:r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.a.createElement("circle",{cx:"15.5",cy:"9.5",r:"1.5"}),r.a.createElement("circle",{cx:"8.5",cy:"9.5",r:"1.5"}),r.a.createElement("path",{d:"M12 14c-2.33 0-4.32 1.45-5.12 3.5h1.67c.69-1.19 1.97-2 3.45-2s2.75.81 3.45 2h1.67c-.8-2.05-2.79-3.5-5.12-3.5zm-.01-12C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))};function h(e){e.preventDefault()}function p(e){return e.slice(0,1).toUpperCase()+e.slice(1)}function v(e){var t=e.includes(" ")?e.split(" "):[],a="";return t.length<=1?p(e):(t.reduce((function(e,t){return a+=p(t)}),a),a)}function g(e){return{type:"SEND_TEXT",data:Object(u.a)(Object(u.a)({},e),{},{date:(new Date).toLocaleString(t,d),timestamp:Date.now()})};var t}function b(e){return{type:"CHANGE_ROOM",data:e}}function E(e){return{type:"REGISTER",data:Object(u.a)(Object(u.a)({},e),{},{time:Date.now()})}}function O(e){return{type:"LOGIN",data:Object(u.a)(Object(u.a)({},e),{},{time:Date.now()})}}function w(e){return{type:"LOGOUT",data:Object(u.a)(Object(u.a)({},e),{},{time:Date.now()})}}function j(e){return{type:"CREATE_ROOM",data:Object(u.a)(Object(u.a)({},e),{},{time:Date.now()})}}function y(e){return{type:"DELETE_ROOM",data:e,time:Date.now()}}function x(e){return{type:"DELETE_NOTIFICATOR",data:e}}function R(e){return{type:"ADD_NOTIFICATOR",data:Object(u.a)(Object(u.a)({},e),{},{time:Date.now()})}}var N=a(5),T=a(6),S=a(8),k=a(7);function V(e){return r.a.createElement("div",{onClick:function(){return e.setView(!1)},className:"backdrop"})}a(31);var C=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this)).keydownHandler=function(e){"Enter"===e.key&&"BUTTON"!==e.target.tagName&&(e.preventDefault(),e.target.nextSibling.focus())},n.submitHandlerRegister=function(e){h(e),n.setView(!1);var t=I(e.target);n.onRegister(t)},n.submitHandlerLogin=function(e){h(e),n.setView(!1);var t=I(e.target);n.onLogin(t)},n.submitHandlerCreate=function(e){h(e),n.setView(!1);var t=I(e.target),a=t.name,r=v(a),c=t.password;n.onCreateRoom({key:r,value:a,password:c})},n.title=e.title,n.inputs=e.inputs,n.svg=e.svg,n.btnText=e.btnText,n.setView=e.setView,n.onRegister=e.onRegister,n.onLogin=e.onLogin,n.onCreateRoom=e.onCreateRoom,n}return Object(T.a)(a,[{key:"render",value:function(){var e=this,t=this.title.toLowerCase(),a=t.includes("register")?this.submitHandlerRegister:t.includes("create")?this.submitHandlerCreate:this.submitHandlerLogin;return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{setView:this.setView}),r.a.createElement("div",{className:"modal"},r.a.createElement("h2",null,this.title),r.a.createElement("form",{onKeyDown:this.keydownHandler,onSubmit:a,className:"modal-form"},this.inputs.map((function(e){return r.a.createElement(H,Object.assign({},e,{key:e.type+e.placeholder}))})),r.a.createElement("button",{className:"modal-btn"},this.btnText," ",this.svg),r.a.createElement("div",{onClick:function(){return e.setView(!1)},className:"modal-close"},f.clear))))}}]),a}(n.Component);function H(e){var t=e.type,a=e.placeholder,n=e.name,c=e.max,o=void 0===c?100:c,s=e.focus,i=void 0!==s&&s;return r.a.createElement("input",{autoFocus:i,className:"modal-input",type:t,placeholder:a,"data-input":n,maxLength:o})}function I(e){var t={};return Array.from(e.querySelectorAll("input")).forEach((function(e){t[e.dataset.input]=e.value})),t}var L=Object(s.b)((function(e){return{}}),(function(e){return Object(m.a)({onRegister:E,onLogin:O,onCreateRoom:j},e)}))(C),_=[{type:"text",placeholder:"name",name:"name",max:15,focus:!0},{type:"password",placeholder:"password",name:"password"}];function z(e){return r.a.createElement(L,{title:"Create Room",btnText:"Create",svg:f.create,inputs:_,setView:e.setView})}function M(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return r.a.createElement("button",{onClick:function(){return e(a)},className:"header-user__btn"},t)}var D=Object(s.b)((function(e){return{currentUser:e.currentUser,rooms:e.rooms}}),(function(e){return Object(m.a)({onLogout:w,onDeleteRoom:y,onChangeRoom:b},e)}))((function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],o=a[1],s=c?r.a.createElement(z,{setView:o}):null;return r.a.createElement("div",{className:"header-user"},s,e.currentUser.name[0],r.a.createElement("div",{className:"header-user__menu"},r.a.createElement("h4",{className:"border-b"},e.currentUser.name),r.a.createElement("div",null,r.a.createElement("button",{className:"header-user__btn"},"My chats"),f.arrowRight,r.a.createElement("ul",null,function(e){return Object.values(e.rooms).map((function(t){return function(e,t){if(t.currentUser.email===e.owner){var a=v(e.name);return r.a.createElement("li",{key:e.name},r.a.createElement("span",{onClick:function(){return t.onChangeRoom(a)}},e.name),M(t.onDeleteRoom,f.delete,a))}return null}(t,e)}))}(e))),r.a.createElement("div",null,M(o,"Create chat",!0),f.create),r.a.createElement("div",null,M(e.onLogout,"Log Out"),f.exit)))})),U=[{type:"text",placeholder:"name",name:"name",focus:!0},{type:"password",placeholder:"password",name:"password"},{type:"email",placeholder:"email",name:"email"}];function A(e){return r.a.createElement(L,{title:"Register",btnText:"Register",svg:f.arrowRight,inputs:U,setView:e.setView})}var B=[{type:"email",placeholder:"email",name:"email",focus:!0},{type:"password",placeholder:"password",name:"password"}];function G(e){return r.a.createElement(L,{title:"Log In",btnText:"Log In",svg:f.login,inputs:B,setView:e.setView})}function F(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],o="reg"===a?r.a.createElement(A,{setView:c}):"log"===a?r.a.createElement(G,{setView:c}):null;return r.a.createElement("div",{className:"header-btn__container"},o,J("Login",c,"log"),J("Register",c,"reg"))}function J(e,t,a){return r.a.createElement("button",{className:"header-btn",onClick:function(){return t(a)}},e)}a(32);var q=Object(s.b)((function(e){return e.currentUser}))((function(e){var t=e.email?r.a.createElement(D,null):r.a.createElement(F,null);return r.a.createElement("header",null,t)}));var P=Object(s.b)((function(e){return{currentUser:e.currentUser,rooms:e.rooms,selectedRoom:e.selectedRoom}}),(function(e){return Object(m.a)({onAddNotify:R},e)}))((function(e){var t=e.currentUser.email;return r.a.createElement("div",{className:"side-menu__item","data-room":v(e.title),onClick:function(a){return function(e,t,a){var n=e.target.closest(".side-menu__item").dataset.room;if(!t&&"site"===a.rooms[n].owner&&a.rooms[n].private)return void a.onAddNotify({text:"Need to login",type:"danger"});if(a.private&&a.rooms[n].owner.includes("@")&&a.rooms[n].owner!==t&&a.selectedRoom!==n)return void function(e,t,a,n,r){if(e.target.querySelector("input"))return;var c=document.createElement("input");c.setAttribute("placeholder","Enter password"),c.onblur=function(){return c.remove()},c.onchange=function(e){e.target.value===t[a].password?(r({text:"Password is right",type:"success"}),n(a),c.remove()):r({text:"Password is wrong",type:"danger"})},e.target.append(c),c.focus()}(e,a.rooms,n,a.changeRoom,a.onAddNotify);a.changeRoom(e.target.closest(".side-menu__item").dataset.room)}(a,t,e)}},r.a.createElement("span",{className:"side-menu__title"},e.title),e.svg)}));function Y(e,t,a,n,c){return r.a.createElement(P,{svg:e,title:t,private:a,changeRoom:n,key:c})}var W=Object(s.b)((function(e){return{rooms:e.rooms}}),(function(e){return Object(m.a)({onChangeRoom:b},e)}))((function(e){var t=function(e){return Object.values(e.rooms).map((function(t){return"site"===t.owner&&e.ownerIsSite?Y(f[t.name],t.name,t.private,e.onChangeRoom,t.name):"site"===t.owner||e.ownerIsSite?null:Y(t.password?f["private room"]:f["open room"],t.name,t.private,e.onChangeRoom,t.name)}))}(e);return null===t[0]&&t.length<=2?null:r.a.createElement("div",{className:"side-menu__chats"},r.a.createElement("h3",{className:"border-b"},e.title),t)})),X=(a(33),function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){return Object(N.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"render",value:function(){return r.a.createElement("aside",null,r.a.createElement("div",null,r.a.createElement(W,{title:"Common chats",ownerIsSite:!0}),r.a.createElement(W,{title:"Users chats",ownerIsSite:!1})))}}]),a}(n.Component)),K=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this)).inputHandler=function(e){n.setState({text:e.target.value})},n.formSubmitHandler=function(e){h(e);var t=e.target.querySelector("input").value,a={message:{user:n.props.currentUser.name,email:n.props.currentUser.email,text:t}};null===n.props.currentUser.email&&(a.message.user+=n.props.sessionId),n.props.onSendText(a),n.clearText(),n.focusText()},n.state={text:""},n.textInput=r.a.createRef(),n}return Object(T.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{className:"message-form",onSubmit:this.formSubmitHandler},r.a.createElement("input",{className:"message-input",type:"text",value:this.state.text,ref:this.textInput,onChange:this.inputHandler}),r.a.createElement("button",{className:"btn-send"}))}},{key:"componentDidMount",value:function(){this.focusText(),this.scrollToEnd()}},{key:"componentDidUpdate",value:function(){this.focusText(),this.scrollToEnd()}},{key:"scrollToEnd",value:function(){var e=document.querySelector(".message-board");e.scrollTo(0,e.scrollHeight)}},{key:"focusText",value:function(){this.textInput.current.focus()}},{key:"clearText",value:function(){this.setState({text:""})}}]),a}(n.Component);var Q=Object(s.b)((function(e){return{currentUser:e.currentUser,sessionId:e.sessionId,selectedRoom:e.selectedRoom}}),(function(e){return Object(m.a)({onSendText:g},e)}))(K);var Z=Object(s.b)((function(e){return{currentUser:e.currentUser,sessionId:e.sessionId}}))((function(e){var t=e.info,a=t.user,n=t.date,c=t.text,o=function(e){var t=e.sessionId,a=e.currentUser,n=e.info,r=n.email,c=n.user,o=a.email===r&&null!==r?"message-item you":"message-item";null===r&&a.name+t===c&&(o+=" you");return o}(e);return r.a.createElement("div",{className:o},r.a.createElement("div",{className:"message-info"},r.a.createElement("div",null,r.a.createElement("span",{className:"message-avatar"},a[0]),r.a.createElement("span",{className:"message-nickname"},a)),r.a.createElement("span",{className:"message-date"},n)),r.a.createElement("p",{className:"message-text"},c))}));function $(e){return r.a.createElement(Z,{info:e,key:e.timestamp+e.user+e.email})}var ee=Object(s.b)((function(e){return{selectedRoom:e.selectedRoom,rooms:e.rooms}}))((function(e){var t=e.selectedRoom,a=e.rooms[t].messages;return r.a.createElement("div",{className:"message-board"},function(e){return e.length?e.map($):null}(a))}));function te(){return r.a.createElement("div",{className:"message-backdrop"},f.conversationImage,r.a.createElement("p",{className:"message-backdrop__text"},"Select some room to begin the conversation!"))}a(34);var ae=Object(s.b)((function(e){return{selectedRoom:e.selectedRoom}}))((function(e){var t=e.selectedRoom?r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,null),r.a.createElement(Q,null)):r.a.createElement(te,null);return r.a.createElement("main",null,r.a.createElement("p",{className:"room-title"},e.selectedRoom),t)}));a(35);function ne(e){var t="notificator-message ".concat(e.type);return r.a.createElement("div",{key:e.time,className:t},e.text)}var re=Object(s.b)((function(e){return e.notificator}),(function(e){return Object(m.a)({onDeleteNotify:x},e)}))((function(e){return e.messages.length<1?r.a.createElement("div",null):(t=e.onDeleteNotify,a=e.time,setTimeout((function(){return t(a)}),5e3),r.a.createElement("div",{className:"notificator"},e.messages.map(ne)));var t,a}));a(36);var ce=function(){return r.a.createElement("div",{className:"app-container"},r.a.createElement(i,null),r.a.createElement(q,null),r.a.createElement(X,null),r.a.createElement(ae,null),r.a.createElement(re,null))};a(37);function oe(){return r.a.createElement("div",{className:"error-message"},r.a.createElement("h1",null,"Something went wrong"),f.sad)}var se=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this)).state={isError:!1},n}return Object(T.a)(a,[{key:"componentDidCatch",value:function(){this.setState({isError:!0})}},{key:"render",value:function(){return this.state.isError?r.a.createElement(oe,null):this.props.children}}]),a}(n.Component),ie=a(9),le=a(4);function me(e,t){if(!t)return JSON.parse(localStorage.getItem(e));localStorage.setItem(e,JSON.stringify(t))}var ue={name:"Guest",email:null},de={messages:[],private:!1,owner:"site"},fe={sessionId:Date.now(),selectedRoom:null,currentUser:Object(u.a)({},ue),rooms:{OpenRoom:Object(u.a)(Object(u.a)({},de),{},{name:"open room"}),PrivateRoom:Object(u.a)(Object(u.a)({},de),{},{name:"private room",private:!0})},users:{},notificator:{text:"",type:"",messages:[]}};var he,pe=Object(m.b)((function(e,t){switch(t.type){case"SEND_TEXT":return function(e,t){var a=t.data,n=a.message,r=a.date,c=a.timestamp,o=e.selectedRoom,s=e.rooms[o],i=[];e&&(i=Object(le.a)(s.messages));return Object(u.a)(Object(u.a)({},e),{},{rooms:Object(u.a)(Object(u.a)({},e.rooms),{},Object(ie.a)({},o,Object(u.a)(Object(u.a)({},e.rooms[o]),{},{messages:[].concat(Object(le.a)(i),[Object(u.a)(Object(u.a)({},n),{},{date:r,timestamp:c})])})))})}(e,t);case"REGISTER":return function(e,t){var a=t.data.email,n=Object.keys(e.users);if(!t.data.name||!t.data.email||!t.data.password||n.includes(t.data.email))return Object(u.a)(Object(u.a)({},e),{},{notificator:{time:t.data.time,messages:[].concat(Object(le.a)(e.notificator.messages),[{text:"Something went wrong",type:"danger",time:t.data.time}])}});return Object(u.a)(Object(u.a)({},e),{},{users:Object(u.a)(Object(u.a)({},e.users),{},Object(ie.a)({},a,{name:t.data.name,password:t.data.password})),notificator:{time:t.data.time,messages:[].concat(Object(le.a)(e.notificator.messages),[{text:"You successufully created account!",type:"success",time:t.data.time}])}})}(e,t);case"LOGIN":return function(e,t){var a=t.data.email,n=t.data.password;if(e.users[a]&&e.users[a].password===n)return Object(u.a)(Object(u.a)({},e),{},{currentUser:{name:e.users[a].name,email:a},notificator:{time:t.data.time,messages:[].concat(Object(le.a)(e.notificator.messages),[{text:"Welcome!",type:"success",time:t.data.time}])}});return Object(u.a)(Object(u.a)({},e),{},{notificator:{time:t.data.time,messages:[].concat(Object(le.a)(e.notificator.messages),[{text:"Log In is failed!",type:"danger",time:t.data.time}])}})}(e,t);case"LOGOUT":return function(e,t){return Object(u.a)(Object(u.a)({},e),{},{currentUser:{name:"Guest",email:null},selectedRoom:null,notificator:{time:t.data.time,messages:[].concat(Object(le.a)(e.notificator.messages),[{text:"Goodbye!",type:"success",time:t.data.time}])}})}(e,t);case"CREATE_ROOM":return function(e,t){if(e.rooms[t.data.key])return Object(u.a)(Object(u.a)({},e),{},{notificator:{time:t.data.time,messages:[].concat(Object(le.a)(e.notificator.messages),[{text:"The chat room is existing!",type:"warning",time:t.data.time}])}});var a=Boolean(t.data.password);return Object(u.a)(Object(u.a)({},e),{},{rooms:Object(u.a)(Object(u.a)({},e.rooms),{},Object(ie.a)({},t.data.key,{messages:[],owner:e.currentUser.email,name:t.data.value,password:t.data.password,private:a})),notificator:{time:t.data.time,messages:[].concat(Object(le.a)(e.notificator.messages),[{text:"You created new chat room!",type:"success",time:t.data.time}])}})}(e,t);case"DELETE_ROOM":return function(e,t){var a=Object(u.a)({},e);return delete a.rooms[t.data],Object(u.a)(Object(u.a)({},e),{},{selectedRoom:null,rooms:Object(u.a)({},a.rooms),notificator:{time:t.time,messages:[].concat(Object(le.a)(e.notificator.messages),[{text:"You deleted chat room!",type:"danger",time:t.time}])}})}(e,t);case"CHANGE_ROOM":return function(e,t){return Object(u.a)(Object(u.a)({},e),{},{selectedRoom:t.data})}(e,t);case"DELETE_NOTIFICATOR":return function(e,t){var a=e.notificator.messages.filter((function(e){return e.time!==t.data}));return Object(u.a)(Object(u.a)({},e),{},{notificator:{time:"",messages:Object(le.a)(a)}})}(e,t);case"ADD_NOTIFICATOR":return function(e,t){return Object(u.a)(Object(u.a)({},e),{},{notificator:{time:t.data.time,messages:[].concat(Object(le.a)(e.notificator.messages),[{text:t.data.text,type:t.data.type,time:t.data.time}])}})}(e,t);default:return e}}),(he=me("chatty"))?function(e){return Object(u.a)(Object(u.a)(Object(u.a)({},fe),e),{},{selectedRoom:null,currentUser:ue,sessionId:Date.now(),notificator:{text:"",type:"",time:"",messages:[]}})}(he):JSON.parse(JSON.stringify(fe))),ve=(a(38),new function e(t){var a=this;Object(N.a)(this,e),this.save=function(e){me(a.name,e)},this.get=function(){return me(a.name)},this.name=t}("chatty"));pe.subscribe((function(){ve.save(pe.getState())})),pe.dispatch({type:"__INIT__"}),o.a.render(r.a.createElement(s.a,{store:pe},r.a.createElement(se,null,r.a.createElement(ce,null))),document.querySelector("#root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.3985347a.chunk.js.map